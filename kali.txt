Comandos Kali y otros:


Conexión:

sudo ifconfig								- Devuelve la información de IPs y MAC (ipconfig en Windows)
ping pagina.com -c 4							- Comprueba conexión con página, -c es count y 4 es el parámetro para las veces que se comprueba
nslookup pagina.com							- Devuelve la dirección IP de la página (IPv4 e IPv6)
netstat -nr								- Devuelve información de mi router
whois pagina.com							- Devuelve información como DNS, IP, Address y mucho más (Kali)


Nmap (Kali):

"Si un escaneo tarda, para ver su porcentaje presionar flecha arriba."

Flags de TCP: SYN (Sincronizar (inicio conexión)), ACK (Confirmación), FIN (Finalizar conexión), RST (Resetear conexión), PSH (Enviar datos inmediatamente), URG (Datos urgentes).


Nmap targeting:

man nmap								- Manual de Nmap (todas las opciones explicadas en buen detalle)
nmap --help 								- Ver opciones generales para Nmap (herramienta de escaneo de redes)
nmap x.x.x.x								- Devuelve puertos abiertos de la IP/pagina que se de. (Puede tardar mucho o nada)
nmp x.x.x.x-x | nmap x.x.x.x/x						- Escanear rango de IPs de dos maneras: -255 o /24


Nmap scan types:

sudo nmap -sS target							- TCP SYN Scan (ruido muy bajo)

Disclaimer: Es de los escaneos más rápidos porque nunca establece una conexión TCP completa. Lo que hace es ejecutar el paso 1 (synchronize) del three way handshake de TCP: SYN (cliente) -> SYN-ACK (servidor) -> ACK (cliente). Solo el root (sudo) puede hacer esto porque no realiza la conexión completa como el normal.

nmap -sT target								- TCP Three way handshake normal (ruido medio)

Disclaimer: Es una conexión TCP completa (es un poco menos rápida que la SYN Scan) y no necesita permisos de root porque si la realiza de manera normal. Este escaneo dejará más rastro en mi objetivo que el -sS.

nmap -sU target								- UDP Scan (ruido medio)

Disclaimer: Este escaneo se va a tardar mucho más que cualquiera de TCP, pero nunca se debe ignorar las vulnerabilidades que pueden existir en puerto UDPs que no son tan usados en web como los puertos TCPs.

sudo nmap -O target							- Descubrir OS del target (se necesita 1 puerto abierto y 1 cerrado para resultados exactos) (ruido medio)
sudo nmap -sV target							- Service Version Scan, da las versiones de los servicios en los puertos abiertos (ruido medio)
sudo nmap -A target							- Aggressive Option, escaneo completo del target y usa todas las opciones anteriores (ruido muy alto)
nmap -sn targets							- No ports, ver solo que hosts están arriba en una red (-255, /24) (ruido muy bajo)

sudo nmap -sF target							- FIN Scan (ruido muy bajo)

Disclaimer: Si los SYN scans están bloqueados por el firewall, el FIN Scan en vez de mandar una flag tipo SYN manda una tipo FIN (Finish). Si el puerto esta abierto no recibe respuesta pues es un fin de conexión pero si esta cerrado va a recibir respuesta RST (Resetear conexión). Mejor y mas viable es el SYN Scan pero no se debe descartar el FIN.

Nmap port scanning:

nmap -p 80 target							- Escanea solamente un puerto en este caso el puerto 80
nmap -p 80,100,5000 target						- Escanea solamente los puertos mencionados
nmap -p 0-65535 target							- Escanea solamente dentro del rango de puertos mencionado, para ver todos sin limite ir al 65535
nmap -F target								- Escanea el top 100 puertos más usados


Packet Fragmentation (no funciona en la mayoría de casos):

sudo nmap -f target							- Divide los paquetes en grupos de 3 (para intentar pasar el firewall)
sudo nmap -f -f target							- Divide los paquetes en grupos de 2 (muchos no soportan tamaños tan pequeños de paquetes)
sudo nmap --mtu n target						- Divide los paquetes en grupos de n (n tiene que ser múltiplo de 8 (byte))


Decoys (esconde mi Ip):

sudo nmap -D RND:5 PARAMS target					- Crea 5 IPs randoms para esconder la mía (todas escanean mi target) (ideal para escanear fuera de mi red)
sudo nmap -D 192.168.1.4,192.168.1.54,192.168.1.32,ME target		- Especifico todas las IPs locales que quiera y al final me incluyo (ME) (ideal para dentro de mi red)
sudo nmap -S x.x.x.x -Pn -e eth0					- Mandar un paquete desde la IP especificada, -Pn asume que el target esta online, -e es el network interface que se 									  puede ver con el ifconfig. Este comando no devuelve respuesta, solo el target puede verlo.
sudo nmap -S x.x.x.x -Pn -e eth0 -g PORT_NUMBER				- Lo mismo que el anterior pero se puede enviar a un puerto especifico (para bypass al firewall si ellos admiten 									  paquetes en un puerto especifico y nosotros tenemos ese puerto)

Guardar Resultados Nmap:

nmap PARAMS target >> file.txt						- Guardar resultado en archivo .txt
nmap -oN file.txt PARAMS target						- Guardar resultado en archivo .txt y también mostrar resultado en terminal


WhatWeb (Kali):

whatweb --help								- Ver opciones generales para WhatWeb (herramienta de escaneo | páginas web)
whatweb pagina.com -v							- Agresión nivel 1 (Stealthy) separada por plugins (verbose)
whatweb x.x.x.x-x.x.x.x							- Usar whatweb en un rango de IP, por ejemplo en mi red local sería 192.168.100.1-192.168.100.255
whatweb pagina.com --aggression n					- Agresión nivel n (3 Heavy, 4 Agressive).
whatweb pagina.com --no-errors						- No muestra los errores que se dan si no encuentra algo hosteado
whatweb pagina.com PARAMS --log-verbose=FILE				- Ejecuta el whatweb con sus parámetros (PARAMS) y al final guarda el archivo (verbose) llamado FILE					

Harvester (Kali):

Disclaimer: A veces esta herramienta no funciona del todo bien, se recomienda usar distinto parámetros de source, intentar varias veces y en distintos días para resultados más completos.
Como alternativa a esta herramienta está la siguiente página web: 	https://hunter.io/
Y también mejor incluso probar herramientas de Information Gathering en GitHub. (muy recomendado)

theHarvester --help							- Ver opciones generales para Harvester (herramienta de escaneo para emails y usernames)
theHarvester -d pagina.com -b all					- Escanear dominio (-d) y que te de todos los sources (mails) (-b all) (limite default de 500)
theHarvester PARAMS -l n						- Poner parametros (PARAMS) y despues un limite especifico (n)

Sherlock (Kali-GitHub):

sherlock --help								- Ver opciones generales para Sherlock (herramienta de escaneo de nombres de usuario)
sherlock username							- Revisa los sitios en donde ese username está vigente

NetDiscover (Kali):

sudo netdiscover --help							- Ver opciones generales para NetDiscover (herramienta de escaneo redes)
sudo netdiscover							- Realiza un escaneo de todos los dispositivos en la red local


